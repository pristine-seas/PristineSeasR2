# PristineSeasR2

**PristineSeasR2** is the data science toolkit for [National Geographic
Pristine
Seas](https://www.nationalgeographic.org/society/our-programs/pristine-seas/).
It provides standardized vocabularies, validation tools, color palettes,
and utilities that ensure consistency across our marine conservation
research.

## Installation

``` r
# install.packages("pak")
pak::pak("pristine-seas/PristineSeasR2")
```

## Standardized Vocabularies

Controlled vocabularies ensure consistent data entry across expeditions
and analysts:

``` r
library(PristineSeasR2)

# Five standardized vocabularies
names(allowed_vocab)
#> [1] "trophic_group"     "depth_strata"      "exposure"         
#> [4] "uvs_habitats"      "functional_groups"

# Trophic classifications for reef fish
allowed_vocab$trophic_group
#> [1] "shark"                   "top_predator"           
#> [3] "lower_carnivore"         "herbivore | detritivore"
#> [5] "planktivore"
```

### Data Validation

Catch non-standard entries early â€”
[`validate_vocab()`](https://pristine-seas.github.io/PristineSeasR2/reference/validate_vocab.md)
stops your pipeline if invalid values are found:

``` r
# Valid data passes
validate_vocab(c("shark", "top_predator", "planktivore"), "trophic_group")
```

``` r
# Invalid data stops with informative error
validate_vocab(c("shark", "apex_predator"), "trophic_group")
#> Error: Invalid values found in 'trophic_group'
#> Found 1 invalid value(s): apex_predator
#> Allowed values: shark, top_predator, lower_carnivore, herbivore | detritivore, planktivore
```

## Color Palettes

Publication-ready colors designed for marine science visualization:

``` r
library(ggplot2)

# Example: Trophic group colors
trophic_colors <- ps_colors("trophic_group")

# Sample data
fish_data <- data.frame(trophic_group = factor(names(trophic_colors), 
                                               levels = names(trophic_colors)),
                        biomass       = c(45, 120, 280, 190, 85))

ggplot(fish_data, 
       aes(x = trophic_group, y = biomass, fill = trophic_group)) +
  geom_col(width = 0.7) +
  scale_fill_ps("trophic_group", drop = TRUE) +
  labs(title = "Reef Fish Biomass by Trophic Group",
       x = NULL,
       y = expression(Biomass~(g/m^2))) +
  theme_ps() 
```

![](reference/figures/README-palettes-1.png)

### Main Palettes

![](reference/figures/README-show-palettes-1.png)

## Depth Stratification

Convert continuous depths to standardized survey categories:

``` r
depths_m <- c(2, 8, 12, 22, 45)

# Classify into strata
stratify(depths_m)
#> [1] "supershallow" "shallow"      "shallow"      "deep"         "superdeep"

# Get station suffixes for IDs
station_suffix(stratify(depths_m))
#> [1] "05m" "10m" "10m" "20m" "30m"
```

## Key Functions

| Function                                                                                                                                                                                          | Purpose                                   |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
| `allowed_vocab`                                                                                                                                                                                   | Standardized vocabularies for survey data |
| [`validate_vocab()`](https://pristine-seas.github.io/PristineSeasR2/reference/validate_vocab.md)                                                                                                  | Validate data against vocabularies        |
| [`ps_colors()`](https://pristine-seas.github.io/PristineSeasR2/reference/ps_colors.md)                                                                                                            | Get color palettes                        |
| [`scale_fill_ps()`](https://pristine-seas.github.io/PristineSeasR2/reference/scale_fill_ps.md) / [`scale_color_ps()`](https://pristine-seas.github.io/PristineSeasR2/reference/scale_color_ps.md) | ggplot2 color scales                      |
| [`theme_ps()`](https://pristine-seas.github.io/PristineSeasR2/reference/theme_ps.md) / [`theme_ps_map()`](https://pristine-seas.github.io/PristineSeasR2/reference/theme_ps_map.md)               | ggplot2 themes                            |
| [`stratify()`](https://pristine-seas.github.io/PristineSeasR2/reference/stratify.md)                                                                                                              | Depth stratification                      |
| [`ps_science_paths()`](https://pristine-seas.github.io/PristineSeasR2/reference/ps_science_paths.md)                                                                                              | Access shared Google Drive folders        |
| [`create_expedition()`](https://pristine-seas.github.io/PristineSeasR2/reference/create_expedition.md)                                                                                            | Create expedition folder structure        |

## Learn More

- [Function
  Reference](https://pristine-seas.github.io/PristineSeasR2/reference/)
- [Pristine Seas
  Website](https://www.nationalgeographic.org/society/our-programs/pristine-seas/)

------------------------------------------------------------------------

*Developed by the Pristine Seas Science Team*

# Package index

## All functions

- [`allowed_vocab`](https://pristine-seas.github.io/PristineSeasR2/reference/allowed_vocab.md)
  : Allowed Vocabularies

- [`clean_field_names()`](https://pristine-seas.github.io/PristineSeasR2/reference/clean_field_names.md)
  : Clean Taxonomic Field Names from Benthic LPI Surveys

- [`create_expedition()`](https://pristine-seas.github.io/PristineSeasR2/reference/create_expedition.md)
  : Create New Pristine Seas Expedition Structure

- [`create_project()`](https://pristine-seas.github.io/PristineSeasR2/reference/create_project.md)
  : Create New Pristine Seas Project Structure

- [`get_crw_dhw_bbox()`](https://pristine-seas.github.io/PristineSeasR2/reference/get_crw_dhw_bbox.md)
  : Fetch NOAA CRW DHW (Degree Heating Week) for a bounding box (bbox)

- [`get_crw_dhw_sf()`](https://pristine-seas.github.io/PristineSeasR2/reference/get_crw_dhw_sf.md)
  :

  Fetch NOAA CRW DHW for an `sf` feature's bounding box

- [`get_drive_paths()`](https://pristine-seas.github.io/PristineSeasR2/reference/get_drive_paths.md)
  : Get Standardized Paths for the Science Team in Google Drive

- [`ps_colors()`](https://pristine-seas.github.io/PristineSeasR2/reference/ps_colors.md)
  : Get Pristine Seas colors

- [`ps_researchers`](https://pristine-seas.github.io/PristineSeasR2/reference/ps_researchers.md)
  : Scientists Lookup Table

- [`ps_science_paths()`](https://pristine-seas.github.io/PristineSeasR2/reference/ps_science_paths.md)
  : Get standardized Pristine Seas Google Drive paths

- [`ps_show_palette()`](https://pristine-seas.github.io/PristineSeasR2/reference/ps_show_palette.md)
  : Preview a Pristine Seas palette

- [`scale_color_ps()`](https://pristine-seas.github.io/PristineSeasR2/reference/scale_color_ps.md)
  : Discrete color scale using Pristine Seas palettes

- [`scale_fill_ps()`](https://pristine-seas.github.io/PristineSeasR2/reference/scale_fill_ps.md)
  : Discrete fill scale using Pristine Seas palettes

- [`station_suffix()`](https://pristine-seas.github.io/PristineSeasR2/reference/station_suffix.md)
  : Get Station Suffix from Depth Strata

- [`stratify()`](https://pristine-seas.github.io/PristineSeasR2/reference/stratify.md)
  : Stratify Depths into Standard Categories

- [`theme_ps()`](https://pristine-seas.github.io/PristineSeasR2/reference/theme_ps.md)
  : Pristine Seas ggplot2 theme

- [`theme_ps_map()`](https://pristine-seas.github.io/PristineSeasR2/reference/theme_ps_map.md)
  : Pristine Seas map theme (ggplot2)

- [`validate_vocab()`](https://pristine-seas.github.io/PristineSeasR2/reference/validate_vocab.md)
  : Validate Values Against Allowed Vocabularies

# Articles

### All vignettes

- [Thermal stress (DHW) from NOAA Coral Reef
  Watch](https://pristine-seas.github.io/PristineSeasR2/articles/crw-dhw.md):
