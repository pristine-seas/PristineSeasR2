<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clean Taxonomic Field Names from Benthic LPI Surveys — clean_field_names • PristineSeasR2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clean Taxonomic Field Names from Benthic LPI Surveys — clean_field_names"><meta name="description" content="Interactively cleans and standardizes taxonomic names from benthic Line Point
Intercept (LPI) surveys. The function processes names through multiple cleaning
steps, asking for user approval at each stage to prevent unintended data loss.
This function is specifically designed for marine benthic taxonomy and implements
field-tested rules for handling taxonomic uncertainty markers, species-level
designations, and common field survey artifacts."><meta property="og:description" content="Interactively cleans and standardizes taxonomic names from benthic Line Point
Intercept (LPI) surveys. The function processes names through multiple cleaning
steps, asking for user approval at each stage to prevent unintended data loss.
This function is specifically designed for marine benthic taxonomy and implements
field-tested rules for handling taxonomic uncertainty markers, species-level
designations, and common field survey artifacts."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PristineSeasR2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pristine-seas/PristineSeasR2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Clean Taxonomic Field Names from Benthic LPI Surveys</h1>
      <small class="dont-index">Source: <a href="https://github.com/pristine-seas/PristineSeasR2/blob/main/R/clean_field_names.R" class="external-link"><code>R/clean_field_names.R</code></a></small>
      <div class="d-none name"><code>clean_field_names.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Interactively cleans and standardizes taxonomic names from benthic Line Point
Intercept (LPI) surveys. The function processes names through multiple cleaning
steps, asking for user approval at each stage to prevent unintended data loss.</p>
<p>This function is specifically designed for marine benthic taxonomy and implements
field-tested rules for handling taxonomic uncertainty markers, species-level
designations, and common field survey artifacts.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">clean_field_names</span><span class="op">(</span><span class="va">x</span>, return_log <span class="op">=</span> <span class="cn">FALSE</span>, auto_approve <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Character vector of taxonomic names to clean</p></dd>


<dt id="arg-return-log">return_log<a class="anchor" aria-label="anchor" href="#arg-return-log"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, returns a list with both cleaned names
and a data frame logging all changes. If <code>FALSE</code> (default), returns only
the cleaned character vector. Default: <code>FALSE</code></p></dd>


<dt id="arg-auto-approve">auto_approve<a class="anchor" aria-label="anchor" href="#arg-auto-approve"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, applies all cleaning steps without
interactive prompts. Use with caution - recommended only after reviewing
changes with <code>auto_approve = FALSE</code> first. Default: <code>FALSE</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>return_log = FALSE</code> (default): A character vector of cleaned taxonomic names,
with <code>NA</code> for entries that were completely removed.</p>
<p>If <code>return_log = TRUE</code>: A list with two elements:</p><dl><dt>cleaned</dt>
<dd><p>Character vector of cleaned taxonomic names</p></dd>

<dt>log</dt>
<dd><p>Data frame with columns <code>step</code>, <code>original</code>, <code>cleaned</code>, and <code>rule</code>
documenting all changes made</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="cleaning-steps">Cleaning Steps<a class="anchor" aria-label="anchor" href="#cleaning-steps"></a></h3>


<p>The function applies the following transformations in sequence:</p><div class="section">
<h4 id="-remove-parentheses-and-quotes">1. Remove Parentheses and Quotes<a class="anchor" aria-label="anchor" href="#-remove-parentheses-and-quotes"></a></h4>


<p>Removes content in parentheses and quotation marks (including nested):</p><ul><li><p><code>Pocillopora (damicornis)</code> → <code>Pocillopora</code></p></li>
<li><p><code>Pocillopora ((nested))</code> → <code>Pocillopora</code></p></li>
<li><p><code>Turbinaria "mesenterina"</code> → <code>Turbinaria</code></p></li>
</ul></div>

<div class="section">
<h4 id="-truncate-at-sp-spp-">2. Truncate at sp./spp.<a class="anchor" aria-label="anchor" href="#-truncate-at-sp-spp-"></a></h4>


<p>Removes species-level uncertainty markers and keeps only genus:</p><ul><li><p><code>Acropora sp.</code> → <code>Acropora</code></p></li>
<li><p><code>Porites spp</code> → <code>Porites</code></p></li>
</ul><p>Pattern matching uses word boundaries to avoid truncating valid names
(e.g., "Dispar" is preserved).</p>
</div>

<div class="section">
<h4 id="-handle-uncertainty-markers">3. Handle Uncertainty Markers<a class="anchor" aria-label="anchor" href="#-handle-uncertainty-markers"></a></h4>


<p><strong>aff. (affinis)</strong> - Strong uncertainty, drops epithet:</p><ul><li><p><code>Montipora aff. capitata</code> → <code>Montipora</code></p></li>
<li><p><code>Montipora Aff. capitata</code> → <code>Montipora</code></p></li>
<li><p>Indicates the specimen is similar to but likely not the named species</p></li>
</ul><p><strong>cf. (confer)</strong> - Mild uncertainty, keeps epithet:</p><ul><li><p><code>Porites cf. lobata</code> → <code>Porites lobata</code></p></li>
<li><p>Indicates comparison with named species, higher confidence</p></li>
</ul></div>

<div class="section">
<h4 id="-handle-unknown-taxonomic-group">4. Handle Unknown + Taxonomic Group<a class="anchor" aria-label="anchor" href="#-handle-unknown-taxonomic-group"></a></h4>


<p>Converts "unknown" + group to proper higher taxonomy:</p><ul><li><p><code>Unknown coral</code> → <code>Scleractinia</code></p></li>
<li><p><code>Unknown sponge</code> → <code>Porifera</code></p></li>
<li><p><code>Unidentified</code> alone → <code>NA</code></p></li>
</ul></div>

<div class="section">
<h4 id="-remove-like-qualifiers">5. Remove '-like' Qualifiers<a class="anchor" aria-label="anchor" href="#-remove-like-qualifiers"></a></h4>


<p>Removes qualifiers indicating morphological similarity:</p><ul><li><p><code>Millepora-like</code> → <code>Millepora</code></p></li>
<li><p><code>Millepora-like organism</code> → <code>Millepora</code></p></li>
<li><p>Handles various dash types: <code>-</code>, <code>–</code>, <code>—</code></p></li>
</ul></div>

<div class="section">
<h4 id="-standardize-capitalization">6. Standardize Capitalization<a class="anchor" aria-label="anchor" href="#-standardize-capitalization"></a></h4>


<p>Converts to proper taxonomic case (genus capitalized, epithet lowercase):</p><ul><li><p><code>ACROPORA PALMATA</code> → <code>Acropora palmata</code></p></li>
<li><p><code>porites lobata</code> → <code>Porites lobata</code></p></li>
</ul></div>

<div class="section">
<h4 id="-whitespace-cleanup">7. Whitespace Cleanup<a class="anchor" aria-label="anchor" href="#-whitespace-cleanup"></a></h4>


<p>Removes extra spaces and trims leading/trailing whitespace</p>
</div>


</div>

<div class="section">
<h3 id="interactive-workflow">Interactive Workflow<a class="anchor" aria-label="anchor" href="#interactive-workflow"></a></h3>


<p>At each step, the function:</p><ol><li><p>Shows proposed changes with before/after comparison</p></li>
<li><p>Displays up to 20 examples (with count of additional changes)</p></li>
<li><p>Prompts for approval (y/n)</p></li>
<li><p>Applies changes only if approved</p></li>
</ol><p>This interactive approach allows taxonomic experts to review each
transformation and ensure no valid taxonomic names are corrupted.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Sigovini, M., Keppel, E., &amp; Tagliapietra, D. (2016). Open Nomenclature in
the biodiversity era. <em>Methods in Ecology and Evolution</em>, 7(10), 1217-1225.</p>
<p>Bengtson, P. (1988). Open nomenclature. <em>Palaeontology</em>, 31, 223-227.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Juan Mayorga</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Basic usage with auto-approve</span></span></span>
<span class="r-in"><span><span class="va">taxa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"ACROPORA SP."</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Porites cf. lobata"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Montipora aff. capitata"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Pocillopora (damicornis)"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Unknown coral"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Millepora-like"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Stylophora  pistillata"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cleaned</span> <span class="op">&lt;-</span> <span class="fu">clean_field_names</span><span class="op">(</span><span class="va">taxa</span>, auto_approve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With logging for reproducibility</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">clean_field_names</span><span class="op">(</span><span class="va">taxa</span>, return_log <span class="op">=</span> <span class="cn">TRUE</span>, auto_approve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cleaned_names</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">cleaned</span></span></span>
<span class="r-in"><span><span class="va">change_log</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">log</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Interactive mode (prompts for approval at each step)</span></span></span>
<span class="r-in"><span><span class="va">cleaned_interactive</span> <span class="op">&lt;-</span> <span class="fu">clean_field_names</span><span class="op">(</span><span class="va">taxa</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Export log for methods section</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">change_log</span>, <span class="st">"taxonomy_cleaning_log.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clean a data frame column</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  taxon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Acropora sp."</span>, <span class="st">"Porites cf. lutea"</span>, <span class="st">"Unknown"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_clean</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>taxon_clean <span class="op">=</span> <span class="fu">clean_field_names</span><span class="op">(</span><span class="va">taxon</span>, auto_approve <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Juan Mayorga.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

